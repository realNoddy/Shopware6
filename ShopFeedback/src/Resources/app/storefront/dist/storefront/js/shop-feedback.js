"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["shop-feedback"],{8393:(t,e,r)=>{var i=r(4229),o=r(3206),n=r(8254),s=r(207);class a extends i.Z{init(){if(this._cart=o.Z.querySelector(document,".header-cart [data-cart-widget]"),this._client=new n.Z(window.accessKey,window.contextToken),void 0===a.notification){const t=document.createElement("div");t.id="shop-feedback-notification",document.querySelector("body").append(t),a.notification=t}super.init()}_openOffCanvasCart(t,e,r){this._client.post(e,r,this._afterAddItemToCart())}_afterAddItemToCart(){const t=o.Z.querySelector(this._form,".btn-buy");t.classList.add("shop-feedback"),t.innerText=t.dataset.addToCartText,t.disabled=!0,setTimeout((()=>{t.classList.remove("shop-feedback"),t.innerText=t.title,t.disabled=!1}),1e3),this._showNotification(this._form),this._refreshCart()}_showNotification(t){const e=document.createElement("div");e.classList.add("shop-feedback-item-notification"),e.classList.add("notification-show");const r=s.Z.serializeJson(t);let i="0";i="productDetailPageBuyProductForm"==t.id?t.closest(".product-detail-content").querySelector(".product-detail-price").innerText:t.closest(".product-info").querySelector(".product-price").innerText;let o=1;for(const t in r)if(t.includes("[quantity]")){o=r[t];break}e.innerHTML="<h5>"+r["product-name"]+"</h5>"+o+"x <strong>"+i+"</strong>",a.notification.append(e),e.addEventListener("click",(()=>{e.classList.remove("notification-show"),e.classList.add("notification-remove")})),e.addEventListener("animationend",(()=>{e.remove()}))}_refreshCart(){const t=window.PluginManager.getPluginInstanceFromElement(this._cart,"CartWidget");this._cart.classList.add("cart-feedback"),setTimeout((()=>{t.fetch()}),50)}}window.PluginManager.override("AddToCart",a,"[data-add-to-cart]")},4229:(t,e,r)=>{r.d(e,{Z:()=>l});var i,o,n,s=r(6285),a=r(9068),c=r(1966),d=r(3206),f=r(207);class l extends s.Z{init(){if(this._getForm(),!this._form)throw new Error(`No form found for the plugin: ${this.constructor.name}`);this._prepareFormRedirect(),this._registerEvents()}_prepareFormRedirect(){try{const t=d.Z.querySelector(this._form,this.options.redirectSelector),e=d.Z.querySelector(this._form,this.options.redirectParamSelector);t.value=this.options.redirectTo,e.disabled=!0}catch(t){}}_getForm(){this.el&&"FORM"===this.el.nodeName?this._form=this.el:this._form=this.el.closest("form")}_registerEvents(){this.el.addEventListener("submit",this._formSubmit.bind(this))}_formSubmit(t){t.preventDefault();const e=d.Z.getAttribute(this._form,"action"),r=f.Z.serialize(this._form);this.$emitter.publish("beforeFormSubmit",r),this._openOffCanvasCarts(e,r)}_openOffCanvasCarts(t,e){const r=a.Z.getPluginInstances("OffCanvasCart");c.Z.iterate(r,(r=>this._openOffCanvasCart(r,t,e)))}_openOffCanvasCart(t,e,r){t.openOffCanvas(e,r,(()=>{this.$emitter.publish("openOffCanvasCart")}))}}i=l,n={redirectSelector:'[name="redirectTo"]',redirectParamSelector:'[data-redirect-parameters="true"]',redirectTo:"frontend.cart.offcanvas"},(o=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(o="options"))in i?Object.defineProperty(i,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[o]=n}},t=>{t.O(0,["vendor-node","vendor-shared"],(()=>{return e=8393,t(t.s=e);var e}));t.O()}]);